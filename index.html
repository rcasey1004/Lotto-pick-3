<script>
    // LOAD SAVED DATA WHEN APP OPENS
    window.onload = function() {
        const savedHistory = localStorage.getItem('pick3_data');
        if (savedHistory) {
            document.getElementById('history').value = savedHistory;
        }
    };

    function generateFivePredictions() {
        const historyBox = document.getElementById('history');
        const historyText = historyBox.value;
        
        // SAVE TO PHONE MEMORY
        localStorage.setItem('pick3_data', historyText);

        const numbers = historyText.replace(/[^0-9]/g, '').split('');
        if (numbers.length < 3) {
            alert("Please paste some history first!");
            return;
        }

        let counts = {};
        for (let i = 0; i < 10; i++) counts[i] = 0;
        numbers.forEach(n => counts[n]++);
        let sortedByFreq = Object.keys(counts).sort((a, b) => counts[b] - counts[a]);

        document.getElementById('resultsArea').style.display = 'block';
        for (let i = 0; i < 5; i++) {
            let pick = (i < 2) ? [sortedByFreq[0], sortedByFreq[1], sortedByFreq[Math.floor(Math.random() * 3)]] :
                       (i === 2) ? [sortedByFreq[0], sortedByFreq[4], sortedByFreq[9]] :
                       [sortedByFreq[9], sortedByFreq[8], sortedByFreq[Math.floor(Math.random() * 10)]];
            pick.sort(() => Math.random() - 0.5);
            document.getElementById('r' + i).innerText = pick.join('');
        }
    }
</script>
